<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>D3 | L4 Skalen</title>
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>

    <style type="text/css">
        body{
            margin:0;
            padding:40px;
            font-family: 'Roboto', 'Helvetica Neue', Helvetica, sans-serif;
            background: rgb(255, 255, 255);
        }

       #datawrapper {
            width: 960px;
            margin: 0 auto;
        }


        .axis path,
        .axis line {
          fill: none;
          stroke: #000;
          shape-rendering: crispEdges;
        }


    </style>
</head>
<body>
    <div id="datawrapper">
        <h1>Erwerb des Schweizer Bürgerrechts</h1>
        <p>Einbürgerungen 2013, in Prozent der Wohnbevölkerung, pro Kanton</p>

        <svg width="960" height="500">
            <defs>
                <pattern id="backgroundImage" patternUnits="userSpaceOnUse" width="960" height="500">
<!--                    <image xlink:href="assets/texture-crumpled-paper.jpg" x="0" y="0" width="1280" height="800" />-->
                    <image xlink:href="assets/back.png" x="0" y="0" width="1024" height="768" />
                </pattern>
            </defs>
        </svg>
    </div>




    <script>
    // SVG Objekt
    var svg = d3.select("svg").append("g");


    // Neu: SKALEN /////////////////////////////////

    var datenrange = d3.range(26); // 26 Kantone, als Ordinalskala
    // ordinal.rangeRoundBands(interval[, padding[, outerPadding]])
    // gleichmässige Bandenbreiten, mit jeweils 10% Abstand, bezogen auf verfügbare Breite
    var x = d3.scale.ordinal().domain(datenrange).rangeRoundBands([0, 960], .1);

    // Lineare Skala
    var y = d3.scale.linear().domain([0, 3]).range([500, 0]);


    // Daten holen
    d3.csv("data/naturalizations-ch-percentage.csv", function(error, csv_DATA) {

        // Datenvisualisierung (Balkendiagramm) rendern
        svg.selectAll(".bar")
          .data(csv_DATA)
        .enter().append("rect")

        .attr("fill", "url(#backgroundImage)")

          .attr("x", function(d,i) { return x(i); })
          .attr("width", x.rangeBand())

          .attr("y", function(d,i) { return y(+d.Prozentual); })
          .attr("height", function(d,i) { return 500 - y(+d.Prozentual); });
    });



</script>
</body>
</html>
