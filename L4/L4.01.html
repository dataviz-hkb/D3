<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <title>Daten CSV/TSV - 4 | CAS Dataviz, Daniel Schoeneck</title>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
</head>
<body>
    <div style="width:650px; margin:200px auto;">
        <svg width="650" height="420" style="stroke-width: 0; background-color: white;">
        </svg>
    </div>

    <script>

        /*  Die Rezepte aus _L3 sind aus mehreren Gründen ungeeignet
            um mit CSV Dateien umgehen zu können
            Versuch 1, Verbesserung SVG Objekt optimieren
            Erstellung der Elemente <g> und <rect> mit den Methoden data(), enter(), append()
        */


        // Leeres Datenarray
        var datensatz = [];

        // SVG Objekt holen
        var svg = d3.select("svg")
                    .append("g");

        // Daten einlesen und als Vereinfachung und Anlehnung an Beispiel aus L3 an Array übergeben
        d3.csv("data/datensatz.csv", function(error, data) {

                data.forEach(function(d) {
                    datensatz.push(parseInt(+d.Rate)+1);
                    // +1 verhindert Nullwerte in der Grafik
                });

                svg.selectAll("rect")
                    .data(datensatz)
                    .enter().append("rect")
                    .attr("class", "bar")
                    .attr("height", function(d,i) { return +d })
                    .attr("y", function(d,i) {  return 420 - d; })
                    .attr("x", function(d,i) { return i*25; })
                    .attr("width", 24)
                    .style("fill", "deeppink");

            });

    </script>
</body>
</html>
